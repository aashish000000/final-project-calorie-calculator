(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[446],{7438:function(e,t,r){Promise.resolve().then(r.bind(r,4648))},4648:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(7437),a=r(2265),n=r(9179),i=r(9376),l=r(9501),o=r(3590),c=r(7119),d=r(7996),u=r(9116),m=r(9827);let h=c.Ry({firstName:c.Z_().min(1,"First name is required").max(100),middleName:c.Z_().max(100).optional(),lastName:c.Z_().min(1,"Last name is required").max(100)});function x(){var e,t,r;let{user:c,refreshUser:x}=(0,n.a)(),f=(0,i.useRouter)(),g=(0,m.NL)(),y=(0,a.useRef)(null),p=(0,a.useRef)(null),[b,v]=(0,a.useState)(!1),[N,j]=(0,a.useState)(!1),[w,P]=(0,a.useState)(""),[k,O]=(0,a.useState)(""),[C,S]=(0,a.useState)(null),[E,q]=(0,a.useState)(!1),[T,z]=(0,a.useState)(!1),[F,L]=(0,a.useState)(!1),[A,D]=(0,a.useState)(!1),[R,U]=(0,a.useState)(null),[J,M]=(0,a.useState)(""),[_,Z]=(0,a.useState)(1),[I,W]=(0,a.useState)(!1),{register:B,handleSubmit:Q,reset:H,formState:{errors:K,isDirty:G}}=(0,l.cI)({resolver:(0,o.F)(h),defaultValues:{firstName:(null==c?void 0:c.firstName)||"",middleName:(null==c?void 0:c.middleName)||"",lastName:(null==c?void 0:c.lastName)||""}});(0,a.useEffect)(()=>{c&&(H({firstName:c.firstName||"",middleName:c.middleName||"",lastName:c.lastName||""}),S(c.profilePicture||null))},[c,H]),(0,a.useEffect)(()=>{function e(e){p.current&&!p.current.contains(e.target)&&q(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let V=async e=>{v(!0),O(""),P("");try{await u.h.updateProfile(e),g.invalidateQueries({queryKey:["user"]}),x&&x(),P("Profile updated successfully!"),setTimeout(()=>P(""),3e3)}catch(e){O(e instanceof Error?e.message:"Failed to update profile")}finally{v(!1)}},X=async()=>{if(R){j(!0),O("");try{await u.h.uploadProfilePicture(R),S(R),g.invalidateQueries({queryKey:["user"]}),x&&x(),P("Profile picture updated!"),setTimeout(()=>P(""),3e3),D(!1),U(null)}catch(e){O(e instanceof Error?e.message:"Failed to upload picture")}finally{j(!1)}}},Y=()=>{W(!0)},$=async()=>{if((null==c?void 0:c.profilePicture)||C){L(!1),q(!1),j(!0),O("");try{await u.h.removeProfilePicture(),S(null),g.invalidateQueries({queryKey:["user"]}),x&&x(),P("Profile picture removed!"),setTimeout(()=>P(""),3e3)}catch(e){O(e instanceof Error?e.message:"Failed to remove picture")}finally{j(!1)}}},ee=()=>c?c.fullName||"".concat(c.firstName," ").concat(c.lastName):"User";return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-40",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>f.back(),className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(d.Ao2,{className:"w-6 h-6 text-gray-700"})}),(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Account Settings"})]})}),(0,s.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6 space-y-6",children:[w&&(0,s.jsxs)("div",{className:"p-4 bg-green-50 border border-green-200 text-green-700 rounded-xl flex items-center gap-3",children:[(0,s.jsx)(d.UgA,{className:"w-5 h-5"}),w]}),k&&(0,s.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 text-red-700 rounded-xl flex items-center gap-3",children:[(0,s.jsx)(d.q5L,{className:"w-5 h-5"}),k]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Picture"}),(0,s.jsxs)("div",{className:"flex items-center gap-6",children:[(0,s.jsxs)("div",{className:"relative",ref:p,children:[C?(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("img",{src:C,alt:"Profile",className:"w-28 h-28 rounded-full object-cover shadow-lg ring-4 ring-white cursor-pointer",onClick:()=>z(!0)}),N&&(0,s.jsx)("div",{className:"absolute inset-0 w-28 h-28 rounded-full bg-black/50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})})]}):(0,s.jsx)("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white font-bold text-4xl shadow-lg ring-4 ring-white",children:c&&((((null===(e=c.firstName)||void 0===e?void 0:e.charAt(0))||"")+((null===(t=c.lastName)||void 0===t?void 0:t.charAt(0))||"")).toUpperCase()||(null===(r=c.email)||void 0===r?void 0:r.charAt(0).toUpperCase()))||"?"}),(0,s.jsx)("button",{onClick:()=>q(!E),disabled:N,className:"absolute bottom-0 right-0 w-10 h-10 bg-gray-100 hover:bg-gray-200 rounded-full border-4 border-white shadow-md flex items-center justify-center transition-colors disabled:opacity-50",children:(0,s.jsx)(d.tBf,{className:"w-5 h-5 text-gray-700"})}),E&&(0,s.jsxs)("div",{className:"absolute left-0 top-full mt-2 w-64 bg-white rounded-xl shadow-xl border border-gray-200 py-2 z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:[C&&(0,s.jsxs)("button",{onClick:()=>{q(!1),z(!0)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:(0,s.jsx)(d.rDJ,{className:"w-5 h-5 text-gray-700"})}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"See profile picture"})]}),(0,s.jsxs)("button",{onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-left",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-100 flex items-center justify-center",children:(0,s.jsx)(d.LFN,{className:"w-5 h-5 text-gray-700"})}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Choose profile picture"})]}),C&&(0,s.jsxs)("button",{onClick:()=>{q(!1),L(!0)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-red-50 transition-colors text-left",children:[(0,s.jsx)("div",{className:"w-9 h-9 rounded-full bg-red-100 flex items-center justify-center",children:(0,s.jsx)(d.q5L,{className:"w-5 h-5 text-red-600"})}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:"Remove photo"})]})]}),(0,s.jsx)("input",{ref:y,type:"file",accept:"image/*",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r)return;if(!r.type.startsWith("image/")){O("Please select an image file");return}if(r.size>5242880){O("Image must be less than 5MB");return}let s=new FileReader;s.onload=e=>{var t;U(null===(t=e.target)||void 0===t?void 0:t.result),q(!1),D(!0),Z(1),M("")},s.readAsDataURL(r),y.current&&(y.current.value="")},className:"hidden"})]}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:ee()}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Click the camera icon to update your profile picture"})]})]})]}),A&&R&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Choose profile picture"}),(0,s.jsx)("button",{onClick:Y,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(d.q5L,{className:"w-6 h-6 text-gray-500"})})]}),(0,s.jsx)("div",{className:"px-4 pt-4",children:(0,s.jsx)("textarea",{value:J,onChange:e=>M(e.target.value),placeholder:"Description",className:"w-full px-4 py-3 bg-gray-50 text-gray-900 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:2})}),(0,s.jsx)("div",{className:"p-6 flex justify-center",children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"w-48 h-48 rounded-full overflow-hidden ring-4 ring-gray-100 shadow-lg",style:{transform:"scale(".concat(_,")")},children:(0,s.jsx)("img",{src:R,alt:"Preview",className:"w-full h-full object-cover"})})})}),(0,s.jsx)("div",{className:"px-6 pb-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>Z(Math.max(.5,_-.1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(d.ego,{className:"w-5 h-5 text-gray-600"})}),(0,s.jsx)("input",{type:"range",min:"0.5",max:"2",step:"0.1",value:_,onChange:e=>Z(parseFloat(e.target.value)),className:"flex-1 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"}),(0,s.jsx)("button",{onClick:()=>Z(Math.min(2,_+.1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(d.OvN,{className:"w-5 h-5 text-gray-600"})})]})}),(0,s.jsxs)("div",{className:"px-6 pb-4 flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>{},className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:[(0,s.jsx)(d.ikx,{className:"w-4 h-4"}),"Crop photo"]}),(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg font-medium transition-colors",children:[(0,s.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{cx:"12",cy:"12",r:"10",strokeWidth:"2"}),(0,s.jsx)("path",{strokeWidth:"2",d:"M12 6v6l4 2"})]}),"Make temporary"]})]}),(0,s.jsx)("div",{className:"px-6 pb-4",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Your profile picture for ",(0,s.jsx)("span",{className:"font-semibold text-gray-700",children:ee()})," will be visible to everyone."]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 bg-gray-50",children:[(0,s.jsx)("button",{onClick:Y,className:"px-6 py-2 text-blue-600 font-semibold hover:bg-blue-50 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:X,disabled:N,className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Saving..."]}):"Save"})]})]})}),I&&(0,s.jsx)("div",{className:"fixed inset-0 z-[60] bg-black/50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden animate-in fade-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Discard changes"}),(0,s.jsx)("button",{onClick:()=>W(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(d.q5L,{className:"w-6 h-6 text-gray-500"})})]}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("p",{className:"text-gray-700",children:"Are you sure that you want to discard your changes?"})}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-100",children:[(0,s.jsx)("button",{onClick:()=>W(!1),className:"px-6 py-2 text-blue-600 font-semibold hover:bg-blue-50 rounded-lg transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{W(!1),D(!1),U(null),M(""),Z(1)},className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-lg hover:bg-blue-700 transition-colors",children:"Discard"})]})]})}),T&&C&&(0,s.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center",onClick:()=>z(!1),children:[(0,s.jsx)("button",{onClick:()=>z(!1),className:"absolute top-4 right-4 p-2 text-white hover:bg-white/10 rounded-full transition-colors",children:(0,s.jsx)(d.q5L,{className:"w-8 h-8"})}),(0,s.jsx)("img",{src:C,alt:"Profile",className:"max-w-[90vw] max-h-[90vh] rounded-lg shadow-2xl",onClick:e=>e.stopPropagation()})]}),F&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50 flex items-center justify-center p-4",onClick:()=>L(!1),children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in-95 duration-200",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"p-6 text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(d.q5L,{className:"w-8 h-8 text-red-600"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Remove Profile Picture?"}),(0,s.jsx)("p",{className:"text-gray-500 text-sm",children:"Are you sure you want to remove your profile picture? This action cannot be undone."})]}),(0,s.jsxs)("div",{className:"flex border-t border-gray-100",children:[(0,s.jsx)("button",{onClick:()=>L(!1),className:"flex-1 py-3 px-4 text-gray-700 font-medium hover:bg-gray-50 transition-colors border-r border-gray-100",children:"Cancel"}),(0,s.jsx)("button",{onClick:$,className:"flex-1 py-3 px-4 text-red-600 font-medium hover:bg-red-50 transition-colors",children:"Remove"})]})]})}),(0,s.jsxs)("form",{onSubmit:Q(V),className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-100",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Update your personal details"})]}),(0,s.jsxs)("div",{className:"p-6 space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["First Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{...B("firstName"),type:"text",className:"w-full px-4 py-3 pl-11 bg-white text-gray-900 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter your first name"}),(0,s.jsx)(d.fzv,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),K.firstName&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:K.firstName.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Middle Name ",(0,s.jsx)("span",{className:"text-gray-400",children:"(Optional)"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{...B("middleName"),type:"text",className:"w-full px-4 py-3 pl-11 bg-white text-gray-900 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter your middle name"}),(0,s.jsx)(d.fzv,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Last Name ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{...B("lastName"),type:"text",className:"w-full px-4 py-3 pl-11 bg-white text-gray-900 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all",placeholder:"Enter your last name"}),(0,s.jsx)(d.fzv,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),K.lastName&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:K.lastName.message})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"email",value:(null==c?void 0:c.email)||"",disabled:!0,className:"w-full px-4 py-3 pl-11 border border-gray-200 rounded-xl bg-gray-50 text-gray-500 cursor-not-allowed"}),(0,s.jsx)(d.Imn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Email cannot be changed"})]})]}),(0,s.jsx)("div",{className:"p-4 bg-gray-50 border-t border-gray-100",children:(0,s.jsx)("button",{type:"submit",disabled:b||!G,className:"w-full py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:b?"Saving...":"Save Changes"})})]})]})]})}},9116:function(e,t,r){"use strict";r.d(t,{h:function(){return i}});var s=r(4131);let a=r(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";class n{getToken(){return s.Z.get("token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getToken(),s={"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...t.headers},n=await fetch("".concat(a).concat(e),{...t,headers:s,credentials:"include"});if(!n.ok)throw Error((await n.json().catch(()=>({}))).message||"HTTP error! status: ".concat(n.status));return 204===n.status?{}:n.json()}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getCurrentUser(){return this.request("/auth/me")}async getFoods(){return this.request("/foods")}async getFood(e){return this.request("/foods/".concat(e))}async createFood(e){return this.request("/foods",{method:"POST",body:JSON.stringify(e)})}async updateFood(e,t){return this.request("/foods/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteFood(e){return this.request("/foods/".concat(e),{method:"DELETE"})}async getEntries(e){return this.request("/food-entries".concat(e?"?date=".concat(e):""))}async createEntry(e){return this.request("/food-entries",{method:"POST",body:JSON.stringify(e)})}async updateEntry(e,t){return this.request("/food-entries/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteEntry(e){return this.request("/food-entries/".concat(e),{method:"DELETE"})}async getDailyMetrics(e){return this.request("/metrics/daily".concat(e?"?date=".concat(e):""))}async getRangeMetrics(e,t){return this.request("/metrics/range?from=".concat(e,"&to=").concat(t))}async sendChatMessage(e,t){let r=null==t?void 0:t.map(e=>({sender:e.role,text:e.content}));return this.request("/chat",{method:"POST",body:JSON.stringify({message:e,history:r})})}async getGoals(){return this.request("/auth/goals")}async updateGoals(e){return this.request("/auth/goals",{method:"PUT",body:JSON.stringify(e)})}async updateProfile(e){return this.request("/auth/profile",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e,t){return this.request("/auth/change-password",{method:"PUT",body:JSON.stringify({currentPassword:e,newPassword:t})})}async deleteAccount(){return this.request("/auth/account",{method:"DELETE"})}async uploadProfilePicture(e){return this.request("/auth/profile-picture",{method:"POST",body:JSON.stringify({imageData:e})})}async removeProfilePicture(){return this.request("/auth/profile-picture",{method:"DELETE"})}async analyzeFood(e){let t=new FormData;t.append("image",e);let r=this.getToken(),s=await fetch("".concat(a,"/image-recognition/analyze"),{method:"POST",headers:{...r&&{Authorization:"Bearer ".concat(r)}},body:t,credentials:"include"});if(!s.ok)throw Error((await s.json().catch(()=>({}))).message||"HTTP error! status: ".concat(s.status));return s.json()}async analyzeRecipe(e,t){return this.request("/recipe/analyze",{method:"POST",body:JSON.stringify({recipeText:e,servings:t})})}async getWaterSummary(e){return this.request("/water/summary".concat(e?"?date=".concat(e):""))}async logWater(e,t){return this.request("/water/log",{method:"POST",body:JSON.stringify({milliliters:e,date:t})})}async deleteWaterEntry(e){return this.request("/water/".concat(e),{method:"DELETE"})}async getFavoriteMeals(){return this.request("/favorite-meals")}async createFavoriteMeal(e){return this.request("/favorite-meals",{method:"POST",body:JSON.stringify(e)})}async deleteFavoriteMeal(e){return this.request("/favorite-meals/".concat(e),{method:"DELETE"})}async getFavoriteMealItems(e){return this.request("/favorite-meals/".concat(e,"/items"))}async getFoodSuggestions(e){return this.request("/suggestions".concat(e?"?date=".concat(e):""))}}let i=new n},9179:function(e,t,r){"use strict";r.d(t,{H:function(){return c},a:function(){return d}});var s=r(7437),a=r(2265),n=r(9376),i=r(4131),l=r(9116);let o=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!0),m=(0,n.useRouter)(),h=(0,a.useCallback)(async()=>{if(!i.Z.get("token")){u(!1);return}try{let e=await l.h.getCurrentUser();c(e)}catch(e){i.Z.remove("token")}finally{u(!1)}},[]);(0,a.useEffect)(()=>{h()},[h]);let x=async(e,t)=>{let r=await l.h.login(e,t);i.Z.set("token",r.token,{expires:7}),c(r.user),m.push("/")},f=async e=>{let t=await l.h.register(e);i.Z.set("token",t.token,{expires:7}),c(t.user),m.push("/")},g=async()=>{try{let e=await l.h.getCurrentUser();c(e)}catch(e){}};return(0,s.jsx)(o.Provider,{value:{user:r,isLoading:d,isAuthenticated:!!r,login:x,register:f,logout:()=>{i.Z.remove("token"),c(null),m.push("/auth/login")},refreshUser:g},children:t})}function d(){let e=(0,a.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})},9827:function(e,t,r){"use strict";r.d(t,{NL:function(){return i},aH:function(){return l}});var s=r(2265),a=r(7437),n=s.createContext(void 0),i=e=>{let t=s.useContext(n);if(e)return e;if(!t)throw Error("No QueryClient set, use QueryClientProvider to set one");return t},l=e=>{let{client:t,children:r}=e;return s.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,a.jsx)(n.Provider,{value:t,children:r})}},6231:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var s=r(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(a),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var s,a;s=t,a=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:a,size:n,title:o}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==n?s.createElement(n.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[956,473,971,117,744],function(){return e(e.s=7438)}),_N_E=e.O()}]);