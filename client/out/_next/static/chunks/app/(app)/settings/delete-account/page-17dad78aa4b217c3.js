(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[464],{5365:function(e,t,r){Promise.resolve().then(r.bind(r,9449))},9449:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(7437),s=r(2265),o=r(9179),a=r(9376),i=r(7996),c=r(9116);function u(){let{logout:e}=(0,o.a)(),t=(0,a.useRouter)(),[r,u]=(0,s.useState)(""),[l,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),m=async()=>{if("DELETE"===r){d(!0),f("");try{await c.h.deleteAccount(),e()}catch(e){f(e instanceof Error?e.message:"Failed to delete account"),d(!1)}}};return(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-16 z-40",children:(0,n.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-4 flex items-center gap-4",children:[(0,n.jsx)("button",{onClick:()=>t.back(),className:"p-2 -ml-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,n.jsx)(i.Ao2,{className:"w-6 h-6 text-gray-700"})}),(0,n.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Delete Account"})]})}),(0,n.jsxs)("div",{className:"max-w-2xl mx-auto px-4 py-6 space-y-6",children:[(0,n.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0",children:(0,n.jsx)(i.BJv,{className:"w-6 h-6 text-red-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-red-800",children:"This action is permanent"}),(0,n.jsx)("p",{className:"text-red-700 mt-1",children:"Once you delete your account, there is no going back. Please be certain."})]})]})}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,n.jsx)("div",{className:"p-4 border-b border-gray-100",children:(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"What will be deleted:"})}),(0,n.jsxs)("ul",{className:"p-4 space-y-3",children:[(0,n.jsxs)("li",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(i.Ybf,{className:"w-5 h-5 text-red-500"}),"Your profile information (name, email)"]}),(0,n.jsxs)("li",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(i.Ybf,{className:"w-5 h-5 text-red-500"}),"All your food logs and meal history"]}),(0,n.jsxs)("li",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(i.Ybf,{className:"w-5 h-5 text-red-500"}),"Custom foods you've created"]}),(0,n.jsxs)("li",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(i.Ybf,{className:"w-5 h-5 text-red-500"}),"Your nutrition goals and settings"]}),(0,n.jsxs)("li",{className:"flex items-center gap-3 text-gray-600",children:[(0,n.jsx)(i.Ybf,{className:"w-5 h-5 text-red-500"}),"AI chat history"]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Confirm Deletion"}),(0,n.jsxs)("p",{className:"text-gray-600 mb-4",children:["To confirm, type ",(0,n.jsx)("span",{className:"font-mono font-bold text-red-600",children:"DELETE"})," in the box below:"]}),h&&(0,n.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-lg text-sm",children:h}),(0,n.jsx)("input",{type:"text",value:r,onChange:e=>u(e.target.value.toUpperCase()),placeholder:"Type DELETE to confirm",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all font-mono"}),(0,n.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,n.jsx)("button",{onClick:()=>t.back(),className:"flex-1 py-3 px-4 border border-gray-300 text-gray-700 font-semibold rounded-xl hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,n.jsx)("button",{onClick:m,disabled:"DELETE"!==r||l,className:"flex-1 py-3 px-4 bg-red-600 text-white font-semibold rounded-xl hover:bg-red-700 focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Deleting..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.Ybf,{className:"w-5 h-5"}),"Delete My Account"]})})]})]}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[(0,n.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Not sure yet?"}),(0,n.jsx)("p",{className:"text-blue-700 text-sm",children:"If you just want to take a break, you can simply log out. Your data will be saved and you can come back anytime."})]})]})]})}},9116:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});var n=r(4131);let s=r(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";class o{getToken(){return n.Z.get("token")}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getToken(),n={"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...t.headers},o=await fetch("".concat(s).concat(e),{...t,headers:n,credentials:"include"});if(!o.ok)throw Error((await o.json().catch(()=>({}))).message||"HTTP error! status: ".concat(o.status));return 204===o.status?{}:o.json()}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e,t){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getCurrentUser(){return this.request("/auth/me")}async getFoods(){return this.request("/foods")}async getFood(e){return this.request("/foods/".concat(e))}async createFood(e){return this.request("/foods",{method:"POST",body:JSON.stringify(e)})}async updateFood(e,t){return this.request("/foods/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteFood(e){return this.request("/foods/".concat(e),{method:"DELETE"})}async getEntries(e){return this.request("/food-entries".concat(e?"?date=".concat(e):""))}async createEntry(e){return this.request("/food-entries",{method:"POST",body:JSON.stringify(e)})}async updateEntry(e,t){return this.request("/food-entries/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteEntry(e){return this.request("/food-entries/".concat(e),{method:"DELETE"})}async getDailyMetrics(e){return this.request("/metrics/daily".concat(e?"?date=".concat(e):""))}async getRangeMetrics(e,t){return this.request("/metrics/range?from=".concat(e,"&to=").concat(t))}async sendChatMessage(e,t){let r=null==t?void 0:t.map(e=>({sender:e.role,text:e.content}));return this.request("/chat",{method:"POST",body:JSON.stringify({message:e,history:r})})}async getGoals(){return this.request("/auth/goals")}async updateGoals(e){return this.request("/auth/goals",{method:"PUT",body:JSON.stringify(e)})}async updateProfile(e){return this.request("/auth/profile",{method:"PUT",body:JSON.stringify(e)})}async changePassword(e,t){return this.request("/auth/change-password",{method:"PUT",body:JSON.stringify({currentPassword:e,newPassword:t})})}async deleteAccount(){return this.request("/auth/account",{method:"DELETE"})}async uploadProfilePicture(e){return this.request("/auth/profile-picture",{method:"POST",body:JSON.stringify({imageData:e})})}async removeProfilePicture(){return this.request("/auth/profile-picture",{method:"DELETE"})}async analyzeFood(e){let t=new FormData;t.append("image",e);let r=this.getToken(),n=await fetch("".concat(s,"/image-recognition/analyze"),{method:"POST",headers:{...r&&{Authorization:"Bearer ".concat(r)}},body:t,credentials:"include"});if(!n.ok)throw Error((await n.json().catch(()=>({}))).message||"HTTP error! status: ".concat(n.status));return n.json()}async analyzeRecipe(e,t){return this.request("/recipe/analyze",{method:"POST",body:JSON.stringify({recipeText:e,servings:t})})}async getWaterSummary(e){return this.request("/water/summary".concat(e?"?date=".concat(e):""))}async logWater(e,t){return this.request("/water/log",{method:"POST",body:JSON.stringify({milliliters:e,date:t})})}async deleteWaterEntry(e){return this.request("/water/".concat(e),{method:"DELETE"})}async getFavoriteMeals(){return this.request("/favorite-meals")}async createFavoriteMeal(e){return this.request("/favorite-meals",{method:"POST",body:JSON.stringify(e)})}async deleteFavoriteMeal(e){return this.request("/favorite-meals/".concat(e),{method:"DELETE"})}async getFavoriteMealItems(e){return this.request("/favorite-meals/".concat(e,"/items"))}async getFoodSuggestions(e){return this.request("/suggestions".concat(e?"?date=".concat(e):""))}}let a=new o},9179:function(e,t,r){"use strict";r.d(t,{H:function(){return u},a:function(){return l}});var n=r(7437),s=r(2265),o=r(9376),a=r(4131),i=r(9116);let c=(0,s.createContext)(void 0);function u(e){let{children:t}=e,[r,u]=(0,s.useState)(null),[l,d]=(0,s.useState)(!0),h=(0,o.useRouter)(),f=(0,s.useCallback)(async()=>{if(!a.Z.get("token")){d(!1);return}try{let e=await i.h.getCurrentUser();u(e)}catch(e){a.Z.remove("token")}finally{d(!1)}},[]);(0,s.useEffect)(()=>{f()},[f]);let m=async(e,t)=>{let r=await i.h.login(e,t);a.Z.set("token",r.token,{expires:7}),u(r.user),h.push("/")},y=async e=>{let t=await i.h.register(e);a.Z.set("token",t.token,{expires:7}),u(t.user),h.push("/")},p=async()=>{try{let e=await i.h.getCurrentUser();u(e)}catch(e){}};return(0,n.jsx)(c.Provider,{value:{user:r,isLoading:l,isAuthenticated:!!r,login:m,register:y,logout:()=>{a.Z.remove("token"),u(null),h.push("/auth/login")},refreshUser:p},children:t})}function l(){let e=(0,s.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9376:function(e,t,r){"use strict";var n=r(5475);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},257:function(e,t,r){"use strict";var n,s;e.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(s=r.g.process)?void 0:s.env)?r.g.process:r(4227)},4227:function(e){!function(){var t={229:function(e){var t,r,n,s=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],u=!1,l=-1;function d(){u&&n&&(u=!1,n.length?c=n.concat(c):l=-1,c.length&&h())}function h(){if(!u){var e=i(d);u=!0;for(var t=c.length;t;){for(n=c,c=[];++l<t;)n&&n[l].run();l=-1,t=c.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}s.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||i(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(e){return[]},s.binding=function(e){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var o=r[e]={exports:{}},a=!0;try{t[e](o,o.exports,n),a=!1}finally{a&&delete r[e]}return o.exports}n.ab="//";var s=n(229);e.exports=s}()},4131:function(e,t,r){"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return s}});var s=function e(t,r){function s(e,s,o){if("undefined"!=typeof document){"number"==typeof(o=n({},r,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var i in o)o[i]&&(a+="; "+i,!0!==o[i]&&(a+="="+o[i].split(";")[0]));return document.cookie=e+"="+t.write(s,e)+a}}return Object.create({set:s,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},s=0;s<r.length;s++){var o=r[s].split("="),a=o.slice(1).join("=");try{var i=decodeURIComponent(o[0]);if(n[i]=t.read(a,i),e===i)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){s(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},6231:function(e,t,r){"use strict";r.d(t,{w_:function(){return l}});var n=r(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=n.createContext&&n.createContext(s),a=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,s;n=t,s=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e){return t=>n.createElement(d,i({attr:u({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,u({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:s,size:o,title:c}=e,l=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,a),d=o||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,l,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&n.createElement("title",null,c),e.children)};return void 0!==o?n.createElement(o.Consumer,null,e=>t(e)):t(s)}}},function(e){e.O(0,[956,971,117,744],function(){return e(e.s=5365)}),_N_E=e.O()}]);